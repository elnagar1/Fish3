const translations = {
    ar: {
        navHomeLink: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        navArticlesLink: "Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª",
        navToolsLink: "Ø§Ù„Ø£Ø¯ÙˆØ§Øª",
        navAboutLink: "Ù…Ù† Ù†Ø­Ù†",
        navConsultLink: "Ø§Ø³ØªØ´Ø§Ø±Ø©",
        // Feature Cards
        featureWaterTitle: "Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…ÙŠØ§Ù‡",
        featureWaterDesc: "Ù†ØµØ§Ø¦Ø­ Ù„ØªØ­Ø³ÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…ÙŠØ§Ù‡ ÙˆØ§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø¨ÙŠØ¦Ø© ØµØ­ÙŠØ© Ù„Ù„Ø£Ø³Ù…Ø§Ùƒ",
        featureFishTitle: "ØµØ­Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ùƒ",
        featureFishDesc: "ØªØ´Ø®ÙŠØµ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ ÙˆØªÙ‚Ø¯ÙŠÙ… Ø­Ù„ÙˆÙ„ Ø¹Ù„Ø§Ø¬ÙŠØ© ÙØ¹Ø§Ù„Ø©",
        featureFeedTitle: "Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø³Ù„ÙŠÙ…Ø©",
        featureFeedDesc: "Ø¨Ø±Ø§Ù…Ø¬ ØªØºØ°ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ù…Ø§Ùƒ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©",
        featureProductivityTitle: "ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©",
        featureProductivityDesc: "Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙˆØªØ­Ù‚ÙŠÙ‚ Ø£ÙØ¶Ù„ Ø¹Ø§Ø¦Ø¯",
        // Section Headers
        sectionArticlesBadge: "Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª ÙˆØ§Ù„Ù†ØµØ§Ø¦Ø­",
        sectionArticlesTitle: "Ø¯Ù„ÙŠÙ„Ùƒ Ù„Ù„Ø§Ø³ØªØ²Ø±Ø§Ø¹ Ø§Ù„Ø³Ù…ÙƒÙŠ Ø§Ù„Ù†Ø§Ø¬Ø­",
        sectionArticlesSubtitle: "Ù†ØµØ§Ø¦Ø­ ÙˆØ®Ø¨Ø±Ø§Øª Ø¹Ù…Ù„ÙŠØ© Ù…Ø³ØªÙˆØ­Ø§Ø© Ù…Ù† Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…ØµØ±ÙŠØ©",
        loadMoreArticles: "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª",
        sectionToolsBadge: "Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©",
        sectionToolsTitle: "Ø£Ø¯ÙˆØ§Øª Ø­Ø³Ø§Ø¨ÙŠØ© Ù…ØªØ®ØµØµØ©",
        sectionToolsSubtitle: "Ø£Ø¯ÙˆØ§Øª ØªØ³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø²Ø±Ø¹ØªÙƒ Ø¨ÙƒÙØ§Ø¡Ø© ÙˆØ§Ø­ØªØ±Ø§ÙÙŠØ©",
        toolFeedTitle: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù„Ù ÙˆØ§Ù„Ø£Ù…ÙˆÙ†ÙŠØ§",
        toolFeedDesc: "Ø§Ø­Ø³Ø¨ ÙƒÙ…ÙŠØ© Ø§Ù„Ø¹Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ ÙˆÙ…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ù…ÙˆÙ†ÙŠØ§ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ø­ÙˆØ¶",
        toolWaterTitle: "Ø­Ø§Ø³Ø¨Ø© Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…ÙŠØ§Ù‡",
        toolWaterDesc: "ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…ÙŠØ§Ù‡ ÙˆØªÙˆØµÙŠØ§Øª Ù„Ù„ØªØ­Ø³ÙŠÙ†",
        toolEcoTitle: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ‰ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©",
        toolEcoDesc: "Ø§Ø­Ø³Ø¨ ØªÙƒØ§Ù„ÙŠÙ Ù…Ø´Ø±ÙˆØ¹Ùƒ ÙˆØ§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹",
        exploreToolsBtn: "Ø§Ø³ØªÙƒØ´Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Øª",
        sectionConsultBadge: "Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©",
        sectionConsultTitle: "Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©",
        sectionConsultSubtitle: "Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªÙ‚Ø¯ÙŠÙ… Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø®ØµØµØ© Ù„Ùƒ",
        consultPrevBtn: "Ø§Ù„Ø³Ø§Ø¨Ù‚",
        consultNextBtn: "Ø§Ù„ØªØ§Ù„ÙŠ",
        consultSubmitBtn: "Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©",
        // sectionAboutTitle & Subtitle loaded dynamically
        // footerRights loaded dynamically
        emptyTeamMessage: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø¹Ø¶Ø§Ø¡ ÙÙŠ Ø§Ù„ÙØ±ÙŠÙ‚ Ø­Ø§Ù„ÙŠØ§Ù‹",

        // Articles Page
        articlesPageTitle: "ðŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª",
        articlesPageSubtitle: "Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ø§Ø³ØªØ²Ø±Ø§Ø¹ Ø§Ù„Ø³Ù…ÙƒÙŠ Ø§Ù„Ù†Ø§Ø¬Ø­",
        filterTitle: "ØªØµÙÙŠØ© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª",
        filterCategoryLabel: "Ø§Ù„ØªØµÙ†ÙŠÙ:",
        clearFiltersText: "Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±",
        sortLabel: "ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨:",
        footerCopyright: "Â© 2024 Ù…Ø³ØªØ´Ø§Ø± Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø£Ø³Ù…Ø§Ùƒ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.",
        searchPlaceholder: "Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª...",
        // Dynamic Results Text
        showingText: "Ø¹Ø±Ø¶",
        ofText: "Ù…Ù†",
        articlesText: "Ù…Ù‚Ø§Ù„Ø©",

        // Tools Page
        toolsPageTitle: "Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©",
        toolsPageSubtitle: "Ø£Ø¯ÙˆØ§Øª Ø­Ø³Ø§Ø¨ÙŠØ© Ù…ØªØ®ØµØµØ© ØªØ³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø²Ø±Ø¹ØªÙƒ Ø¨ÙƒÙØ§Ø¡Ø©",

        toolDensityTitle: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ÙƒØ«Ø§ÙØ© Ø§Ù„Ø³Ù…ÙƒÙŠØ©",
        toolDensityDesc: "Ø­Ø¯Ø¯ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù…Ø«Ù„ Ù„Ù„Ø£Ø³Ù…Ø§Ùƒ ÙÙŠ Ø­ÙˆØ¶Ùƒ",

        toolProfitTitle: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø±Ø©",
        toolProfitDesc: "Ø§Ø­Ø³Ø¨ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ ÙˆØ§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬",

        toolFCRTitle: "Ø­Ø§Ø³Ø¨Ø© FCR",
        toolFCRDesc: "Ù‚ÙŠÙ‘Ù… ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø¹Ù„Ù ÙˆÙ…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„",

        toolBioflocTitle: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¨Ø§ÙŠÙˆÙÙ„ÙˆÙƒ",
        toolBioflocDesc: "Ø§Ø­Ø³Ø¨ Ù†Ø³Ø¨Ø© C:N ÙˆÙƒÙ…ÙŠØ© Ø§Ù„Ø³ÙƒØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©",

        toolScheduleTitle: "Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ",
        toolScheduleDesc: "Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ ØªØºØ°ÙŠØ© Ù…Ø®ØµØµ Ù„Ù…Ø²Ø±Ø¹ØªÙƒ",

        badgeFeatured: "Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹",
        badgeNew: "Ø¬Ø¯ÙŠØ¯",
        badgeAdvanced: "Ù…ØªÙ‚Ø¯Ù…",
        toolAvailableNow: "Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù†",
        toolComingSoon: "Ù‚Ø±ÙŠØ¨Ø§Ù‹",
        toolComingSoon2: "Ù‚Ø±ÙŠØ¨Ø§Ù‹",
        langText: "English"
    },
    en: {
        navHomeLink: "Home",
        navArticlesLink: "Articles",
        navToolsLink: "Tools",
        navAboutLink: "About Us",
        navConsultLink: "Consultation",
        // Feature Cards
        featureWaterTitle: "Water Quality",
        featureWaterDesc: "Tips to improve water quality and maintain a healthy environment for fish",
        featureFishTitle: "Fish Health",
        featureFishDesc: "Diagnose diseases and provide effective treatment solutions",
        featureFeedTitle: "Proper Nutrition",
        featureFeedDesc: "Comprehensive feeding programs for different fish species",
        featureProductivityTitle: "Productivity Enhancement",
        featureProductivityDesc: "Strategies to increase production and achieve the best returns",
        // Section Headers
        sectionArticlesBadge: "Articles & Tips",
        sectionArticlesTitle: "Your Guide to Successful Fish Farming",
        sectionArticlesSubtitle: "Practical advice and expertise inspired by the Egyptian environment",
        loadMoreArticles: "Load More Articles",
        sectionToolsBadge: "Farm Tools",
        sectionToolsTitle: "Specialized Calculation Tools",
        sectionToolsSubtitle: "Tools to help you manage your farm efficiently and professionally",
        toolFeedTitle: "Feed & Ammonia Calculator",
        toolFeedDesc: "Calculate daily feed requirements and expected ammonia levels",
        toolWaterTitle: "Water Quality Calculator",
        toolWaterDesc: "Comprehensive analysis of water quality parameters with recommendations",
        toolEcoTitle: "Feasibility Calculator",
        toolEcoDesc: "Calculate your project costs and expected returns",
        exploreToolsBtn: "Explore All Tools",
        sectionConsultBadge: "New Consultation",
        sectionConsultTitle: "Answer the Following Questions",
        sectionConsultSubtitle: "Answer these questions so we can provide a personalized consultation",
        consultPrevBtn: "Previous",
        consultNextBtn: "Next",
        consultSubmitBtn: "Get Consultation",
        // sectionAboutTitle & Subtitle loaded dynamically
        // footerRights loaded dynamically
        emptyTeamMessage: "No team members available at the moment",

        // Articles Page
        articlesPageTitle: "ðŸ“š Articles Library",
        articlesPageSubtitle: "Your Comprehensive Guide to Successful Fish Farming",
        filterTitle: "Filter Articles",
        filterCategoryLabel: "Category:",
        clearFiltersText: "Clear Filters",
        sortLabel: "Sort By:",
        footerCopyright: "Â© 2024 Fish Farm Consultant. All rights reserved.",
        searchPlaceholder: "Search articles...",
        showingText: "Showing",
        ofText: "of",
        articlesText: "articles",

        // Tools Page
        toolsPageTitle: "Farm Tools",
        toolsPageSubtitle: "Specialized calculation tools to help you manage your farm efficiently",

        toolDensityTitle: "Fish Density Calculator",
        toolDensityDesc: "Determine the optimal number of fish for your pond",

        toolProfitTitle: "Profit & Loss Calculator",
        toolProfitDesc: "Calculate costs and expected profits for the production cycle",

        toolFCRTitle: "FCR Calculator",
        toolFCRDesc: "Evaluate feed efficiency and conversion rate",

        toolBioflocTitle: "Biofloc Calculator",
        toolBioflocDesc: "Calculate C:N ratio and required sugar amount",

        toolScheduleTitle: "Feeding Schedule",
        toolScheduleDesc: "Get a customized feeding schedule for your farm",

        badgeFeatured: "Most Used",
        badgeNew: "New",
        badgeAdvanced: "Advanced",
        toolAvailableNow: "Available Now",
        toolComingSoon: "Coming Soon",
        toolComingSoon2: "Coming Soon",
        langText: "Ø¹Ø±Ø¨ÙŠ"
    }
};

let currentLang = localStorage.getItem('appLang') || 'ar';

function applyLanguage(lang) {
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    currentLang = lang;
    localStorage.setItem('appLang', lang);

    // Update static text
    const t = translations[lang];
    for (const key in t) {
        const element = document.getElementById(key);
        if (element) {
            // Check if element has button text inside span or direct text
            if (element.tagName === 'BUTTON' && element.querySelector('span')) {
                // For buttons with icon + span
                const span = element.querySelector('span');
                if (span.id === key) span.innerText = t[key];
                else {
                    // Try to find the text node and update it
                    // This simple approach assumes ID matches 
                    element.innerText = t[key];
                }
            } else {
                element.innerText = t[key];
            }
        }
    }

    // Update button text specifically if complex structure
    const langSpan = document.getElementById('langText');
    if (langSpan) langSpan.innerText = t.langText;

    // Refresh Dynamic Data
    if (window.app) {
        if (window.app.renderArticles) window.app.renderArticles();
        if (window.app.renderTeam) window.app.renderTeam();
        if (window.app.loadSiteContent) window.app.loadSiteContent();
        if (window.app.renderDynamicQuestions) window.app.renderDynamicQuestions();
    } else {
        // Fallback for direct global functions if old architecture
        if (window.loadArticles) window.loadArticles();
        if (window.loadTeamMembers) window.loadTeamMembers();
        if (window.initConsultation) window.initConsultation();
    }
}

function toggleLanguage() {
    const newLang = currentLang === 'ar' ? 'en' : 'ar';
    applyLanguage(newLang);
}

// Initialize on load
document.addEventListener('DOMContentLoaded', () => {
    applyLanguage(currentLang);
});
